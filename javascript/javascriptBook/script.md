# script标签

## [`<script>`需要注意的属性](https://blog.csdn.net/Umbrella_Um/article/details/103060086)：

   1. `async`:可选。表示应该立即开始下载脚本，但不能阻止其他页面动作，比如下载资源或等待其他脚本加载。只对外部脚本文件。
   2. `defer`:可选。表示脚本可以延迟到文档完全被解析和显示之后再执行。只对外部脚本文件。
      1. 没有`defer`或`async`属性，浏览器会立即加载并执行相应的脚本，此举会阻塞后续文档的加载，即`js`脚本的加载是同步的。
      2. 有了`async`属性，表示后续文档的加载和渲染与`js`脚本的加载和执行是并行进行的，即异步执行；
      3. 有了`defer`属性，加载后续文档的过程和`js`脚本的加载(此时仅加载不执行)是并行进行的(异步)，`js`脚本的执行需要等到文档所有元素解析完成之后，`DOMContentLoaded`事件触发执行之前。
      4. 与`defer`不同的是，标记为`async`的脚本并不保证能按照它们出现的次序执行。异步脚本不应该在加载期间修改`DOM`。异步脚本保证会在页面的`load`事件前执行。
   3. `type`:可选。按照惯例，这个值始终都是`"text/javascript"`。如果这个值是`module`，则代码会被当成`ES6`模块，而且只有这时候代码中才能出现`import`和`export`关键字。
   4. `crossorigin`:可选。配置相关请求的`CORS`(跨源资源共享)设置。默认不使用`CORS`。`crossorigin= "anonymous"`配置文件请求不必设置凭据标志。`crossorigin="use-credentials"`设置凭据标志，意味着出站请求会包含凭据。
       - 允许本地获取到跨域脚本的错误信息，但有两个条件：一是跨域脚本的服务器必须通过`Access-Controll-Allow-Origin`头信息允许当前域名可以获取错误信息，二是当前域名的`script`标签也必须指明 `src`属性指定的地址是支持跨域的地址，也就是`crossorigin`属性。
   5. `integrity`:可选。允许比对接收到的资源和指定的加密签名以验证子资源完整性(`SRI，Subresource Integrity`)。如果接收到的资源的签名与这个属性指定的签名不匹配，则页面会报错，脚本不会执行。这个属性可以用于确保内容分发网络(`CDN，Content Delivery Network`)不会提供恶意内容。
       - 启用`SRI`策略后，浏览器会对资源进行`CORS`校验，这就要求被请求的资源必须同域，或者配置了`Access-Control-Allow-Origin`响应头。

## 注意点

1. 默认`append`到文档中的`script`会异步执行（可以理解为默认拥有`async`属性，如果需要加载的`js`按顺序执行，需要设置`async`为`false`。
2. 通过`innerHTML`动态添加到页面上的`script`标签不会被执行。
3. 页面在浏览器解析到`<body>`的起始标签时开始渲染，通常将所有`JavaScript`引用放在`<body>`元素中的页面内容后面，页面会在处理`JavaScript`代码之前完全渲染页面。
4. 浏览器会根据特定的设置缓存所有外部链接的`JavaScript`文件，这意味着如果两个页面都用到同一个文件，则该文件只需下载一次。这最终意味着页面加载更快。